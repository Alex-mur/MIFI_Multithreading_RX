# CustomRX
### Упрощённая реализация некоторых методов библиотеки RXJava
Cистема реактивных потоков с возможностью управления потоками выполнения (Schedulers) и обработки событий с использованием паттерна «Наблюдатель» (Observer pattern).

## Архитектура

### Основные интерфейсы и классы

1. **Observer<T>**
    - Интерфейс для получения уведомлений от Observable
    - Методы:
        - `onNext(T item)`: Получает элементы от Observable
        - `onError(Throwable t)`: Обрабатывает ошибки
        - `onComplete()`: Обрабатывает завершение

2. **Observable<T>**
    - Основной класс для создания и манипуляции потоками данных
    - Поддерживает создание, преобразование и подписку
    - Реализует основной паттерн реактивного программирования

3. **Disposable**
    - Интерфейс для управления подписками
    - Методы:
        - `dispose()`: Отменяет подписку
        - `isDisposed()`: Проверяет статус подписки

## Основные компоненты

### Создание Observable
```java
Observable<Integer> observable = Observable.create(observer -> {
    observer.onNext(1);
    observer.onNext(2);
    observer.onComplete();
});
```

### Подписка
```java
Disposable subscription = observable.subscribe(
    item -> System.out.println("Получено: " + item),
    error -> System.out.println("Ошибка: " + error.getMessage()),
    () -> System.out.println("Завершено!")
);
```

## Планировщики (Schedulers)

Библиотека предоставляет три типа планировщиков для управления выполнением потоков:

1. **IOThreadScheduler**
    - Использует `CachedThreadPool`
    - Идеален для I/O операций
    - Создает новые потоки по мере необходимости
    - Переиспользует неактивные потоки
    - Лучше всего подходит для: сетевых вызовов, операций с файлами

2. **ComputationScheduler**
    - Использует `FixedThreadPool`
    - Размер основан на доступных процессорах
    - Оптимизирован для CPU-интенсивных задач
    - Лучше всего подходит для: обработки данных, вычислений

3. **SingleThreadScheduler**
    - Использует исполнитель с одним потоком
    - Обеспечивает последовательное выполнение
    - Лучше всего подходит для: обновлений UI, упорядоченных операций

## Операторы

### Map
Преобразует элементы, испускаемые Observable
```java
observable.map(x -> x * 2)
          .subscribe(...);
```

### Filter
Фильтрует элементы на основе предиката
```java
observable.filter(x -> x % 2 == 0)
          .subscribe(...);
```

### FlatMap
Преобразует элементы в Observable и объединяет их
```java
observable.flatMap(x -> Observable.create(observer -> {
    observer.onNext(x * 10);
    observer.onNext(x * 20);
    observer.onComplete();
}))
.subscribe(...);
```

## Тестирование

- Юнит-тесты можно найти в файле test\java\ObservableTest.
- Для написания тестов используется библиотека junit.

### Краткие пояснения к тестам
1. **subscribeWithObserver**
   - Проверяет базовую подписку через Observer. Эмитируются 3 числа и завершение потока. Убеждается, что все элементы получены, поток завершен корректно, ошибок нет.

2. **subscribeWithHandlers**
   - Тестирует подписку с отдельными лямбда-обработчиками. Эмитируются 2 строки и завершение. Проверяет получение элементов и корректное завершение.

3. **mapOperation**
   - Проверяет работу оператора map. Числа преобразуются в строки. Убеждается в корректности преобразования.

3. **filterOperation**
   - Тестирует оператор filter. Эмитируются 3 числа, фильтр оставляет значения >7. Проверяет корректность фильтрации.

3. **errorHandling**
   - Проверяет обработку ошибок в Observable. После успешного элемента эмитируется ошибка. Убеждается, что ошибка доставлена подписчику.

3. **mapErrorHandling**
   - Тестирует обработку ошибок в операторе map. Искусственно вызывает ошибку при обработке элемента. Проверяет доставку ошибки.

3. **filterErrorHandling**
   - Проверяет обработку ошибок в операторе filter. Искусственно вызывает ошибку при фильтрации. Убеждается в доставке ошибки.

3. **disposableStopsEvents**
   - Тестирует отмену подписки через Disposable. Эмитируются элементы, на 3-м элементе отменяется подписка. Проверяет, что последующие элементы и завершение игнорируются.

3. **flatMapTransformsAndFlattensItems**
   - Проверяет базовую работу flatMap. Каждый элемент преобразуется в 2 новых элемента. Убеждается в корректном "уплощении" потоков.

3. **flatMapHandlesEmptyInnerObservables**
   - Тестирует flatMap с пустыми внутренними потоками. Проверяет корректное завершение основного потока без элементов.

3. **flatMapPropagatesMapperErrors**
   - Проверяет обработку ошибок в функции-маппере flatMap. Искусственно вызывает ошибку при преобразовании. Убеждается в доставке ошибки.

3. **flatMapPropagatesInnerObservableErrors**
   - Тестирует обработку ошибок во внутренних потоках flatMap. Имитирует ошибку во внутреннем Observable. Проверяет доставку ошибки в основной поток.

### Тесты покрывают

- Основные операции (создание, преобразование, фильтрация)
- Работу с ошибками
- Управление подписками (Disposable)
- Специфику flatMap (уплощение потоков, обработку пустых потоков, ошибки)
- Корректность завершения потоков
- Синхронные сценарии работы





